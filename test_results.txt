============================= test session starts =============================
platform win32 -- Python 3.14.2, pytest-9.0.2, pluggy-1.6.0 -- C:\Project Vasko\Regulatory Harmonization Engine\venv\Scripts\python.exe
cachedir: .pytest_cache
rootdir: C:\Project Vasko\Regulatory Harmonization Engine
plugins: anyio-4.12.1, langsmith-0.6.9, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 28 items

tests/test_retriever.py::TestTokenizeIndonesian::test_basic_tokenization PASSED [  3%]
tests/test_retriever.py::TestTokenizeIndonesian::test_stopword_removal PASSED [  7%]
tests/test_retriever.py::TestTokenizeIndonesian::test_preserves_legal_terms PASSED [ 10%]
tests/test_retriever.py::TestTokenizeIndonesian::test_lowercase_conversion PASSED [ 14%]
tests/test_retriever.py::TestTokenizeIndonesian::test_empty_input PASSED [ 17%]
tests/test_retriever.py::TestTokenizeIndonesian::test_numbers_preserved PASSED [ 21%]
tests/test_retriever.py::TestSearchResult::test_creation PASSED          [ 25%]
tests/test_retriever.py::TestSearchResult::test_to_dict PASSED           [ 28%]
tests/test_retriever.py::TestHybridRetrieverInit::test_initialization PASSED [ 32%]
tests/test_retriever.py::TestHybridRetrieverInit::test_corpus_loaded PASSED [ 35%]
tests/test_retriever.py::TestHybridRetrieverInit::test_get_stats PASSED  [ 39%]
tests/test_retriever.py::TestDenseSearch::test_dense_search_returns_results FAILED [ 42%]
tests/test_retriever.py::TestDenseSearch::test_dense_search_result_structure FAILED [ 46%]
tests/test_retriever.py::TestDenseSearch::test_dense_search_scores_sorted FAILED [ 50%]
tests/test_retriever.py::TestSparseSearch::test_sparse_search_returns_results FAILED [ 53%]
tests/test_retriever.py::TestSparseSearch::test_sparse_search_keyword_match PASSED [ 57%]
tests/test_retriever.py::TestSparseSearch::test_sparse_search_empty_query PASSED [ 60%]
tests/test_retriever.py::TestHybridSearch::test_hybrid_search_basic FAILED [ 64%]
tests/test_retriever.py::TestHybridSearch::test_hybrid_search_indonesian_query FAILED [ 67%]
tests/test_retriever.py::TestHybridSearch::test_hybrid_search_has_citations FAILED [ 71%]
tests/test_retriever.py::TestHybridSearch::test_hybrid_search_rrf_scores FAILED [ 75%]
tests/test_retriever.py::TestFilteredSearch::test_search_by_document_type FAILED [ 78%]
tests/test_retriever.py::TestFilteredSearch::test_search_by_nonexistent_type FAILED [ 82%]
tests/test_retriever.py::TestEdgeCases::test_very_long_query FAILED      [ 85%]
tests/test_retriever.py::TestEdgeCases::test_special_characters_query FAILED [ 89%]
tests/test_retriever.py::TestEdgeCases::test_top_k_zero FAILED           [ 92%]
tests/test_retriever.py::TestEdgeCases::test_result_serialization SKIPPED [ 96%]
.\venv\Scripts\python.exe : Windows fatal exception: access violation
At line:1 char:69
+ ... on Engine'; .\venv\Scripts\python.exe -m pytest tests\test_retriever. ...
+                 ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (Windows fatal e...ccess violation:String) [], RemoteException
    + FullyQualifiedErrorId : NativeCommandError
 

Thread 0x000098f8 [Thread-1] (most recent call first):
  File "C:\Users\vasco\AppData\Local\Python\pythoncore-3.14-64\Lib\threading.py", line 373 in wait
  File "C:\Users\vasco\AppData\Local\Python\pythoncore-3.14-64\Lib\threading.py", line 670 in wait
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\tqdm\_monitor.py", line 60 in run
  File "C:\Users\vasco\AppData\Local\Python\pythoncore-3.14-64\Lib\threading.py", line 1082 in _bootstrap_inner
  File "C:\Users\vasco\AppData\Local\Python\pythoncore-3.14-64\Lib\threading.py", line 1044 in _bootstrap

Current thread 0x00008308 (most recent call first):
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\torch\storage.py", line 468 in 
__getitem__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\transformers\modeling_utils.py", line 
748 in _load_state_dict_into_meta_model
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\torch\utils\_contextlib.py", line 124 
in decorate_context
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\transformers\modeling_utils.py", line 
843 in load_shard_file
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\transformers\modeling_utils.py", line 
5468 in _load_pretrained_model
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\transformers\modeling_utils.py", line 
5048 in from_pretrained
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\transformers\modeling_utils.py", line 
277 in _wrapper
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\transformers\models\auto\auto_factory.py", line 604 in from_pretrained
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\sentence_transformers\models\Transformer.py", line 197 in _load_model
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\sentence_transformers\models\Transformer.py", line 89 in __init__
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\sentence_transformers\models\Transformer.py", line 366 in load
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\sentence_transformers\SentenceTransformer.py", line 2305 in _load_sbert_model
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\sentence_transformers\SentenceTransformer.py", line 327 in __init__
  File "C:\Project Vasko\Regulatory Harmonization 
Engine\venv\Lib\site-packages\langchain_huggingface\embeddings\huggingface.py", line 97 in __init__
  File "C:\Project Vasko\Regulatory Harmonization Engine\backend\retriever.py", line 106 in __init__
  File "C:\Project Vasko\Regulatory Harmonization Engine\backend\retriever.py", line 399 in get_retriever
  File "C:\Project Vasko\Regulatory Harmonization Engine\tests\test_retriever.py", line 108 in retriever
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 915 in 
call_fixture_func
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 1202 in 
pytest_fixture_setup
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_callers.py", line 121 in 
_multicall
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_manager.py", line 120 in 
_hookexec
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_hooks.py", line 512 in __call__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 1110 in 
execute
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 627 in 
_get_active_fixturedef
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 539 in 
getfixturevalue
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\fixtures.py", line 707 in 
_fillfixtures
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\python.py", line 1723 in setup
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 523 in setup
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 165 in 
pytest_runtest_setup
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_callers.py", line 121 in 
_multicall
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_manager.py", line 120 in 
_hookexec
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_hooks.py", line 512 in __call__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 245 in 
<lambda>
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 353 in 
from_call
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 244 in 
call_and_report
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 131 in 
runtestprotocol
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\runner.py", line 118 in 
pytest_runtest_protocol
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_callers.py", line 121 in 
_multicall
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_manager.py", line 120 in 
_hookexec
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_hooks.py", line 512 in __call__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\main.py", line 396 in 
pytest_runtestloop
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_callers.py", line 121 in 
_multicall
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_manager.py", line 120 in 
_hookexec
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_hooks.py", line 512 in __call__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\main.py", line 372 in _main
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\main.py", line 318 in 
wrap_session
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\main.py", line 365 in 
pytest_cmdline_main
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_callers.py", line 121 in 
_multicall
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_manager.py", line 120 in 
_hookexec
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pluggy\_hooks.py", line 512 in __call__
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\config\__init__.py", line 199 
in main
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\_pytest\config\__init__.py", line 223 
in console_main
  File "C:\Project Vasko\Regulatory Harmonization Engine\venv\Lib\site-packages\pytest\__main__.py", line 9 in <module>
  File "<frozen runpy>", line 88 in _run_code
  File "<frozen runpy>", line 198 in _run_module_as_main

Current thread's C stack trace (most recent call first):
  <cannot get C stack on this system>
tests/test_retriever.py::test_full_search_pipeline 
